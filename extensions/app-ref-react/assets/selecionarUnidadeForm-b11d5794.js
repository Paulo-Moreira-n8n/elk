import{j as e,r as p,c as y,h as w,E as k}from"./index-937124d3.js";import{BrModal as S,BrRadioGroup as $}from"./index.es-48ecd79c.js";import{u as O,C as P}from"./index.esm-f456321d.js";import{I as U}from"./index-5eadc3a6.js";import{u as F}from"./agendamentoPericiaService-c6729037.js";import{u as M,a as I}from"./index-bfbcd454.js";import{S as R}from"./Skeleton-61bbb5f9.js";import"./index-4c2fedbf.js";import"./entityTemplate-44ecf47a.js";import"./contentTemplate-e555837d.js";import"./hoist-non-react-statics.cjs-eed8e650.js";const B=o=>{const[n,m]=o.split(" "),[t,c,d]=n.split("/"),[l,a]=m.split(":");return new Date(+d,+c-1,+t,+l,+a)},H=({selected:o,date:n,children:m,...t})=>{const c=B(n),l=new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"short",day:"2-digit",...o&&{hour:"2-digit",minute:"2-digit"}}).format(c).replaceAll(" de","").replace(".","").replace(",","").split(" ").map((a,r)=>e.jsx(p.Fragment,{children:e.jsx("div",{style:{lineHeight:"1"},className:`mt-1
            ${r===0?"text-semi-bold text-up-04":r===1?"text-semi-bold":r===3?"mt-2":""}
          `,children:a.toUpperCase()})},r));return e.jsx("a",{className:`card-link d-block ${o?"selected":""}`,href:"#",onClick:a=>a.preventDefault(),children:e.jsx("br-card",{style:{"--card-padding":"0px"},"h-fixed":!0,"transparent-bg":!0,...t,children:e.jsx("div",{className:"card-content",slot:"content",children:e.jsxs("div",{className:"d-flex align-items-center",style:{height:"100%"},children:[e.jsxs("div",{style:{height:"100%"},className:`col-4 px-2 d-flex flex-column justify-content-center ${o?"bg-interactive":"bg-gray-cool-10"}`,children:[e.jsx("p",{className:`mb-0 text-down-01 text-center ${o?"text-secondary-01":""}`,children:"Data para Atendimento"}),e.jsx("time",{dateTime:n,className:`mb-0 text-down-01 text-center ${o?"text-secondary-01":""}`,children:l})]}),e.jsx("div",{className:"col",children:m})]})})})})},X=()=>{var x;console.log("RENDER SelecionarUnidadeForm");const{unidades:o,error:n,loading:m}=F(),[t,c]=y(M),[d,l]=p.useState(!1),[a,r]=y(I),N=(x=t==null?void 0:t.endereco)==null?void 0:x.cep,{control:C,handleSubmit:D}=O();console.log("Unidades",o),console.log("Unidade selecionada",t),console.log("Data selecionada",a),console.log("Cep selecionado",N);const E=p.useCallback(({cep:s})=>{console.log("CEP informado",s)},[]),A=Array.from({length:12}).map((s,i)=>e.jsx("div",{className:"col-sm-6 col-md-4 col-lg-3 mb-4",children:e.jsx(R,{height:130})},i));return e.jsxs("form",{onSubmit:D(E),children:[e.jsx(S,{showClose:!0,title:"Selecionar Data e Hora",onClose:()=>l(!1),isOpen:d,keepOpenOnPrimaryAction:!0,primaryAction:{label:"Selecionar",action:()=>{l(!1)}},secondaryAction:{label:"Cancelar",action:()=>{c(null),r("")}},children:e.jsx("div",{className:"container mt-4",children:!!(t!=null&&t.datasDisponiveis.length)&&e.jsx($,{value:a,name:"datasDisponiveis",onChange:s=>{r(s.target.value)},options:t==null?void 0:t.datasDisponiveis.map((s,i)=>({id:`${s}-${i}`,label:s,value:s}))})})}),e.jsx("h5",{children:"Agendamento de Perícia"}),e.jsx("p",{className:"mb-4",children:"Informe o CEP da região na qual você deseja ser atendido. O sistema buscará as opções disponíveis nas proximidades."}),e.jsx("div",{className:"d-flex justify-content-center mb-4",children:e.jsx("div",{style:{width:550,maxWidth:"100%"},children:e.jsx(P,{control:C,name:"cep",render:({field:s})=>e.jsx(U,{onChange:s.onChange,placeholder:"Informe o seu CEP",value:s.value,mask:w.CEP,icon:"search","icon-submit":!0,density:"large",autoFocus:!0})})})}),e.jsx("div",{className:"d-flex justify-content-center flex-wrap",children:m?A:n?e.jsx(k,{title:"Erro ao recuperar unidades",error:n}):o!=null&&o.length?o.map(s=>{var i,h,j,g,u,f,b;return e.jsx("div",{className:"col-sm-6 col-md-4 col-lg-3 mb-4",children:e.jsxs(H,{date:(t==null?void 0:t.id)===s.id?a:s.primeiraDataDisponivel,selected:(t==null?void 0:t.id)===s.id,onClick:()=>{c(s),r(v=>s.datasDisponiveis.includes(v)?v:s.primeiraDataDisponivel),l(!0)},children:[e.jsxs("p",{className:"mb-1 text-semi-bold text-base text-uppercase",children:[(i=s.endereco)==null?void 0:i.municipio," - ",s.nome]}),e.jsxs("p",{className:"mb-0 text-down-01",children:[(h=s.endereco)==null?void 0:h.tipoLogradouro," ",(j=s.endereco)==null?void 0:j.logradouro,", ",(g=s.endereco)==null?void 0:g.numeroLogradouro]}),e.jsxs("p",{className:"mb-0 text-down-01",children:[(u=s.endereco)==null?void 0:u.municipio," - ",(f=s.endereco)==null?void 0:f.uf]}),e.jsxs("p",{className:"mb-0 text-down-01",children:["CEP: ",(b=s.endereco)==null?void 0:b.cep]})]})},`${s.id}}`)}):"Nenhuma unidade disponível"})]})};export{X as default};
