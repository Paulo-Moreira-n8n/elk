import{r as a,j as s,_ as y,b as H,k as J,g as K,P as f,E as $}from"./index-937124d3.js";import{u as Q}from"./index.esm-f456321d.js";import{P as W}from"./index-4c2fedbf.js";import{P as X,D as Y,E as C,R as ss}from"./resumoProfissionalDetails-2acbf9e6.js";import{BrModal as E}from"./index.es-48ecd79c.js";import{S as O}from"./Skeleton-61bbb5f9.js";import{b as es,c as os,d as rs,e as is}from"./manterPeritosService-fde8e1c7.js";import{E as as}from"./entityTemplate-44ecf47a.js";import{A as ts}from"./avatar-57123338.js";import"./index-d1f469d6.js";import"./hoist-non-react-statics.cjs-eed8e650.js";import"./contentTemplate-e555837d.js";const ls=({open:e,setOpen:r,onCancel:i,onPrimaryAction:o,loadingPrimaryAction:t})=>{const c=a.useRef(null);return a.useEffect(()=>{var u,d,n;(n=(d=(u=c.current)==null?void 0:u.shadowRoot)==null?void 0:d.querySelector("button"))==null||n.focus()},[c]),s.jsx(E,{showClose:!0,title:"Atenção",onClose:i==null?void 0:i(r),isOpen:e,width:440,children:s.jsx("div",{className:"container-fluid mt-4",children:s.jsxs("div",{className:"row align-items-center",children:[s.jsx("div",{className:"col-2",children:s.jsx("span",{className:"fa fa-info-circle text-up-05 text-blue-vivid-50"})}),s.jsx("div",{className:"col-10 text-weight-medium",children:"Ao confirmar qualquer alteração nos dados cadastrais de um Médico Perito, você estará assumindo a responsabilidade legal sobre a veracidades destas informações."}),s.jsxs("div",{className:"col-12 d-flex justify-content-end mt-4 mb-2",children:[s.jsx("br-button",{disabled:t||null,class:"mr-2",small:!0,type:"secondary",onClick:i==null?void 0:i(r),label:"Cancelar"}),s.jsx("br-button",{ref:c,disabled:t||null,loading:t||null,small:!0,type:"primary",onClick:o,label:"Atualizar"})]})]})})})},ds=()=>{const e=s.jsx(O,{height:63});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-6",children:e}),s.jsx("div",{className:"col-md-3",children:e}),s.jsx("div",{className:"col-md-3",children:e})]}),s.jsxs("div",{className:"row mt-md-2",children:[s.jsx("div",{className:"col-md-2",children:e}),s.jsx("div",{className:"col-md-3",children:e}),s.jsx("div",{className:"col-md-7",children:e})]}),s.jsxs("div",{className:"row mt-md-2",children:[s.jsx("div",{className:"col-md-3",children:e}),s.jsx("div",{className:"col-md-3",children:e}),s.jsx("div",{className:"col-md-3",children:e}),s.jsx("div",{className:"col-md-3",children:e})]})]})},cs=a.lazy(()=>y(()=>import("./dadosPessoaisForm-0e51e86f.js"),["assets/dadosPessoaisForm-0e51e86f.js","assets/index-937124d3.js","assets/index-f618be9d.css","assets/index.es-48ecd79c.js","assets/index.esm-f456321d.js","assets/index-5eadc3a6.js"])),ns=({open:e,setOpen:r,control:i,onCancel:o,onPrimaryAction:t})=>s.jsx(E,{showClose:!0,title:"Dados Pessoais",onClose:o==null?void 0:o(r),isOpen:e,width:950,keepOpenOnPrimaryAction:!0,primaryAction:{label:"Atualizar",action:t},secondaryAction:{label:"Cancelar",action:o==null?void 0:o(r)},children:s.jsx("div",{className:"container-fluid mt-4",children:s.jsx(a.Suspense,{fallback:s.jsx(ds,{}),children:s.jsx(cs,{modalOpen:e,control:i})})})}),ms=()=>{const e=s.jsx(O,{height:63});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-3",children:e}),s.jsx("div",{className:"col-md-4",children:e}),s.jsx("div",{className:"col-md-2",children:e}),s.jsx("div",{className:"col-md-3",children:e})]}),s.jsxs("div",{className:"row mt-md-2",children:[s.jsx("div",{className:"col-md-3",children:e}),s.jsx("div",{className:"col-md-4",children:e}),s.jsx("div",{className:"col-md-2",children:e}),s.jsx("div",{className:"col-md-3",children:e})]})]})},us=a.lazy(()=>y(()=>import("./enderecoForm-337aa511.js"),["assets/enderecoForm-337aa511.js","assets/index-937124d3.js","assets/index-f618be9d.css","assets/index.es-48ecd79c.js","assets/index.esm-f456321d.js","assets/index-5eadc3a6.js"])),xs=({open:e,setOpen:r,control:i,onCancel:o,onPrimaryAction:t})=>s.jsx(E,{showClose:!0,title:"Endereço",onClose:o==null?void 0:o(r),isOpen:e,width:950,keepOpenOnPrimaryAction:!0,primaryAction:{label:"Atualizar",action:t},secondaryAction:{label:"Cancelar",action:o==null?void 0:o(r)},children:s.jsx("div",{className:"container-fluid mt-4",children:s.jsx(a.Suspense,{fallback:s.jsx(ms,{}),children:s.jsx(us,{modalOpen:e,control:i})})})}),js=()=>s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-md-12",children:s.jsx(O,{height:150})})}),hs=a.lazy(()=>y(()=>import("./resumoProfissionalForm-91930a16.js"),["assets/resumoProfissionalForm-91930a16.js","assets/index-937124d3.js","assets/index-f618be9d.css","assets/index.esm-f456321d.js"])),fs=({open:e,setOpen:r,control:i,onCancel:o,onPrimaryAction:t})=>s.jsx(E,{showClose:!0,title:"Resumo Profissional",onClose:o==null?void 0:o(r),isOpen:e,width:950,keepOpenOnPrimaryAction:!0,primaryAction:{label:"Atualizar",action:t},secondaryAction:{label:"Cancelar",action:o==null?void 0:o(r)},children:s.jsx("div",{className:"container-fluid mt-4",children:s.jsx(a.Suspense,{fallback:s.jsx(js,{}),children:s.jsx(hs,{modalOpen:e,control:i})})})}),Ps=({open:e,setOpen:r})=>s.jsx(E,{showClose:!0,title:"Sucesso",onClose:()=>r(!1),isOpen:e,width:350,focusOnSecondaryAction:!0,secondaryAction:{label:"OK",action:()=>r(!1)},children:s.jsx("div",{className:"container-fluid mt-4",children:s.jsxs("div",{className:"row align-items-center",children:[s.jsx("div",{className:"col-2",children:s.jsx("span",{className:"fa fa-check-circle text-up-05 text-green-cool-vivid-40"})}),s.jsx("div",{className:"col-10 text-weight-medium",children:"Os dados cadastrais do Médico Perito foram atualizados."})]})})}),Es=({dadosPessoaisModalState:[e,r],enderecoModalState:[i,o],resumoProfissionalModalState:[t,c],confirmationModalState:[u,d],successModalState:[n,v],control:j,onCancel:x,loading:A,onAfterConfirmation:R})=>s.jsxs(s.Fragment,{children:[e&&s.jsx(ns,{open:e,setOpen:r,onCancel:x,control:j,onPrimaryAction:()=>d(!0)}),i&&s.jsx(xs,{open:i,setOpen:o,onCancel:x,control:j,onPrimaryAction:()=>d(!0)}),t&&s.jsx(fs,{open:t,setOpen:c,onCancel:x,control:j,onPrimaryAction:()=>d(!0)}),u&&s.jsx(ls,{open:u,setOpen:d,onCancel:x,onPrimaryAction:R,loadingPrimaryAction:A}),n&&s.jsx(Ps,{open:n,setOpen:v})]}),ws=()=>{const e=a.useState(!1),[r,i]=e,o=a.useState(!1),[t,c]=o,u=a.useState(!1),[d,n]=u,v=a.useState(!1),j=v[1],x=a.useState(!1),A=x[1],R=H(),{control:U,handleSubmit:Z,reset:h}=Q(),{id:G}=J(),P=+(G??""),{perito:m,setPerito:I,loading:w,error:D}=es(P),{editarDadosPessoaisPerito:_,loading:S,error:p}=os(),{editarEnderecoPerito:T,loading:b,error:N}=rs(),{editarResumoProfissionalPerito:k,loading:M,error:g}=is(),B=S||b||M,F=p||N||g,L=D||F,z=a.useCallback(()=>{i(!1),c(!1),n(!1),j(!1)},[j,i,c,n]),V=a.useCallback(async l=>{console.log("ATUALIZAR PERITO:",JSON.stringify(l,null,2)),r&&(console.log("ATUALIZANDO DADOS PESSOAIS"),await _(P,l)),t&&(console.log("ATUALIZANDO ENDEREÇO"),await T(P,l==null?void 0:l.endereco)),d&&(console.log("ATUALIZANDO RESUMO PROFISSIONAL"),await k(P,l==null?void 0:l.resumoProfissional)),!p&&!S&&!N&&!b&&!g&&!M?(console.log("PERITO ATUALIZADO"),z(),I([l]),h(l),A(!0)):console.error("ERRO AO ATUALIZAR PERITO:",p||N||g)},[z,r,_,T,k,t,p,N,g,P,S,b,M,h,d,I,A]),q=a.useCallback(l=>()=>{console.log("onCancel chamado"),l(!1),h(m)},[m,h]);return a.useEffect(()=>{h(m)},[m,h]),s.jsx(as,{pageTitle:s.jsx(W,{breadcrumb:[{url:K(f.GERENCIAR_PERITOS.route),label:f.GERENCIAR_PERITOS.title},{label:f.EDITAR_PERITO.title,active:!0}],backButtonRoute:f.GERENCIAR_PERITOS.route,children:f.EDITAR_PERITO.title}),image:w?s.jsx(O,{width:184,height:184,variant:"circular"}):s.jsx("img",{src:ts,alt:"Avatar"}),buttons:[s.jsx("br-button",{type:"secondary",icon:"angle-left",label:"Voltar",onClick:()=>R(f.GERENCIAR_PERITOS.route)},"voltar")],displayContentEvenOnError:!D,errorMessage:L&&s.jsx($,{title:`Erro ao ${F?"editar":"recuperar"} perito`,error:L}),children:w?s.jsx(X,{hasButtons:!0}):s.jsxs(s.Fragment,{children:[s.jsx(Es,{dadosPessoaisModalState:e,enderecoModalState:o,resumoProfissionalModalState:u,confirmationModalState:v,successModalState:x,control:U,onCancel:q,loading:B,onAfterConfirmation:Z(V)}),s.jsx(Y,{...m,toggleModal:i}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-6",children:s.jsx(C,{...m==null?void 0:m.endereco,toggleModal:c})}),s.jsx("div",{className:"col-md-6",children:s.jsx(ss,{...m,toggleModal:n})})]})]})})};export{ws as default};
