import{r as i,u as g,M as C,A as m,_ as E,a as T,b as x,c as P,P as u,j as s,E as f,l as R}from"./index-937124d3.js";import{C as H}from"./contentTemplate-e555837d.js";const h=()=>{console.log("useValidateReCAPTCHA sendo executado");const e=i.createRef(),{fetchFunction:a,error:n,setError:t,loading:d,setLoading:c}=g({endpoint:m.VALIDATE_RECAPTCHA,method:"POST",manageError:!1}),A=i.useCallback(async()=>{var l;try{c(!0);const o=await((l=e.current)==null?void 0:l.executeAsync());if(!o)throw new Error(C.VALIDATE_RECAPTCHA);console.log("Token do reCAPTCHA obtido:",o),console.log("Solicitando validação do token do reCAPTCHA");const r=await a({token:o});if(console.log("JSON de resposta da validação do token do reCAPTCHA:",r),!(r!=null&&r.success))throw new Error(C.VALIDATE_RECAPTCHA);return!0}catch(o){t(o)}},[a,e,t,c]);return{reCAPTCHARef:e,validateReCAPTCHA:A,loading:d,error:n}},v="/assets/ilustracao-login-75e0b0b7.svg",p=i.lazy(()=>E(()=>import("./index-2bdc2749.js"),["assets/index-2bdc2749.js","assets/index-937124d3.js","assets/index-f618be9d.css","assets/hoist-non-react-statics.cjs-eed8e650.js"])),y=()=>{console.log("RENDER Login");const{config:e}=T(),a=(e==null?void 0:e.enabledRecaptcha)&&!!(e!=null&&e.sitekey),n=x(),[t,d]=P(R),{reCAPTCHARef:c,validateReCAPTCHA:A,loading:l,error:o}=h(),r=async()=>{(!a||await A())&&(d(!0),n(u.HOME.route))};return i.useEffect(()=>{t&&n(u.HOME.route)},[t,n]),t?null:s.jsxs(H,{children:[s.jsxs("div",{className:"col-md-6 mt-lg-10x",children:[s.jsx("h4",{className:"mt-10x",children:u.LOGIN.title}),s.jsx("br-button",{onClick:r,type:"primary",disabled:l||null,label:l?"Verificando se você não é um robô...":o?"Tentar entrar novamente":"Entrar"}),o&&s.jsx(f,{error:o,marginBefore:!0})]}),s.jsx("div",{className:"col-md-6 mt-3 mt-lg-10x d-flex justify-content-center flex-column",children:s.jsx("img",{src:v,alt:"Ilustração de login"})}),s.jsx(i.Suspense,{children:a&&s.jsx(p,{ref:c,size:"invisible",sitekey:e.sitekey})})]})};export{y as default};
